{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import api from'../services/api';import ProfilePhoto from'./ProfilePhoto';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Connections=()=>{const[connections,setConnections]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const[notification,setNotification]=useState({message:'',type:''});useEffect(()=>{fetchConnections();},[]);const fetchConnections=async()=>{try{setLoading(true);const response=await api.get('/connections');setConnections(response.data);setError('');}catch(err){setError('Failed to load connections');console.error('Error fetching connections:',err);}finally{setLoading(false);}};const showNotification=function(message){let type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'success';setNotification({message,type});setTimeout(()=>setNotification({message:'',type:''}),3000);};const removeConnection=async connectionId=>{if(!window.confirm('Are you sure you want to remove this connection? You will no longer see each other\\'s private posts.')){return;}try{await api.delete(\"/connections/\".concat(connectionId));showNotification('Connection removed successfully');fetchConnections();}catch(err){var _err$response,_err$response$data;console.error('Error removing connection:',err);showNotification(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||'Failed to remove connection','error');}};const formatDate=dateString=>{const date=new Date(dateString);return date.toLocaleDateString('en-US',{year:'numeric',month:'short',day:'numeric'});};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"Loading connections...\"})});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-error\",children:error});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'30px'},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"My Connections\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#65676b',marginTop:'10px'},children:\"Manage your connections and see who you're connected with\"})]}),notification.message&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-\".concat(notification.type==='error'?'error':'success'),children:notification.message}),connections.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"No connections yet\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Start connecting with other users to see their private posts and share yours with them.\"}),/*#__PURE__*/_jsx(Link,{to:\"/users\",className:\"btn btn-primary\",style:{marginTop:'20px'},children:\"Find People to Connect With\"})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"connections-header\",children:/*#__PURE__*/_jsxs(\"p\",{style:{color:'#65676b',marginBottom:'20px'},children:[\"You have \",connections.length,\" connection\",connections.length!==1?'s':'',\". Connected users can see each other's private posts.\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"connections-grid\",children:connections.map(connection=>/*#__PURE__*/_jsxs(\"div\",{className:\"connection-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"connection-info\",children:[/*#__PURE__*/_jsx(ProfilePhoto,{currentPhoto:connection.profile_photo,size:\"medium\",username:connection.username}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-details\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"user-name\",children:/*#__PURE__*/_jsx(Link,{to:\"/users/\".concat(connection.username),className:\"user-link\",children:connection.username})}),/*#__PURE__*/_jsxs(\"p\",{className:\"connection-date\",children:[\"Connected since \",formatDate(connection.connection_date)]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"connection-actions\",children:[/*#__PURE__*/_jsx(Link,{to:\"/users/\".concat(connection.username),className:\"btn btn-secondary btn-sm\",children:\"View Profile\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger btn-sm\",onClick:()=>removeConnection(connection.connection_id),title:\"Remove connection\",children:\"Remove\"})]})]},connection.connection_id))})]})]});};export default Connections;","map":{"version":3,"names":["React","useState","useEffect","Link","api","ProfilePhoto","jsx","_jsx","jsxs","_jsxs","Connections","connections","setConnections","loading","setLoading","error","setError","notification","setNotification","message","type","fetchConnections","response","get","data","err","console","showNotification","arguments","length","undefined","setTimeout","removeConnection","connectionId","window","confirm","delete","concat","_err$response","_err$response$data","formatDate","dateString","date","Date","toLocaleDateString","year","month","day","className","children","style","marginBottom","color","marginTop","to","map","connection","currentPhoto","profile_photo","size","username","connection_date","onClick","connection_id","title"],"sources":["/Users/kylehailey/cursor/vrai.art/client/src/components/Connections.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport api from '../services/api';\nimport ProfilePhoto from './ProfilePhoto';\n\nconst Connections = () => {\n  const [connections, setConnections] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [notification, setNotification] = useState({ message: '', type: '' });\n\n  useEffect(() => {\n    fetchConnections();\n  }, []);\n\n  const fetchConnections = async () => {\n    try {\n      setLoading(true);\n      const response = await api.get('/connections');\n      setConnections(response.data);\n      setError('');\n    } catch (err) {\n      setError('Failed to load connections');\n      console.error('Error fetching connections:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const showNotification = (message, type = 'success') => {\n    setNotification({ message, type });\n    setTimeout(() => setNotification({ message: '', type: '' }), 3000);\n  };\n\n  const removeConnection = async (connectionId) => {\n    if (!window.confirm('Are you sure you want to remove this connection? You will no longer see each other\\'s private posts.')) {\n      return;\n    }\n\n    try {\n      await api.delete(`/connections/${connectionId}`);\n      showNotification('Connection removed successfully');\n      fetchConnections();\n    } catch (err) {\n      console.error('Error removing connection:', err);\n      showNotification(err.response?.data?.error || 'Failed to remove connection', 'error');\n    }\n  };\n\n  const formatDate = (dateString) => {\n    const date = new Date(dateString);\n    return date.toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric'\n    });\n  };\n\n  if (loading) {\n    return (\n      <div className=\"loading\">\n        <h3>Loading connections...</h3>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"alert alert-error\">\n        {error}\n      </div>\n    );\n  }\n\n  return (\n    <div>\n      <div style={{ marginBottom: '30px' }}>\n        <h1>My Connections</h1>\n        <p style={{ color: '#65676b', marginTop: '10px' }}>\n          Manage your connections and see who you're connected with\n        </p>\n      </div>\n\n      {notification.message && (\n        <div className={`alert alert-${notification.type === 'error' ? 'error' : 'success'}`}>\n          {notification.message}\n        </div>\n      )}\n\n      {connections.length === 0 ? (\n        <div className=\"empty-state\">\n          <h3>No connections yet</h3>\n          <p>Start connecting with other users to see their private posts and share yours with them.</p>\n          <Link to=\"/users\" className=\"btn btn-primary\" style={{ marginTop: '20px' }}>\n            Find People to Connect With\n          </Link>\n        </div>\n      ) : (\n        <div>\n          <div className=\"connections-header\">\n            <p style={{ color: '#65676b', marginBottom: '20px' }}>\n              You have {connections.length} connection{connections.length !== 1 ? 's' : ''}. \n              Connected users can see each other's private posts.\n            </p>\n          </div>\n          \n          <div className=\"connections-grid\">\n            {connections.map((connection) => (\n              <div key={connection.connection_id} className=\"connection-card\">\n                <div className=\"connection-info\">\n                  <ProfilePhoto\n                    currentPhoto={connection.profile_photo}\n                    size=\"medium\"\n                    username={connection.username}\n                  />\n                  <div className=\"user-details\">\n                    <h3 className=\"user-name\">\n                      <Link to={`/users/${connection.username}`} className=\"user-link\">\n                        {connection.username}\n                      </Link>\n                    </h3>\n                    <p className=\"connection-date\">\n                      Connected since {formatDate(connection.connection_date)}\n                    </p>\n                  </div>\n                </div>\n                <div className=\"connection-actions\">\n                  <Link \n                    to={`/users/${connection.username}`} \n                    className=\"btn btn-secondary btn-sm\"\n                  >\n                    View Profile\n                  </Link>\n                  <button \n                    className=\"btn btn-danger btn-sm\"\n                    onClick={() => removeConnection(connection.connection_id)}\n                    title=\"Remove connection\"\n                  >\n                    Remove\n                  </button>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Connections; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}