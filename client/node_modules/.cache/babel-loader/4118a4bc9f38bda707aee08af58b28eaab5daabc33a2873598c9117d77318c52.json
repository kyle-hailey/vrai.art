{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import{useParams,Link}from'react-router-dom';import api from'../services/api';import{useAuth}from'../contexts/AuthContext';import ProfilePhoto from'./ProfilePhoto';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UserProfile=()=>{const{username}=useParams();const{user:currentUser}=useAuth();const[user,setUser]=useState(null);const[posts,setPosts]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const fetchUserPosts=useCallback(async()=>{try{setLoading(true);const response=await api.get(\"/users/\".concat(username,\"/posts\"));setUser(response.data.user);setPosts(response.data.posts);setError('');}catch(err){setError('Failed to load user profile');console.error('Error fetching user posts:',err);}finally{setLoading(false);}},[username]);useEffect(()=>{fetchUserPosts();},[fetchUserPosts]);const formatDate=dateString=>{const date=new Date(dateString);return date.toLocaleDateString('en-US',{year:'numeric',month:'short',day:'numeric',hour:'2-digit',minute:'2-digit'});};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"Loading...\"})});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-error\",children:error});}if(!user){return/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"User not found\"}),/*#__PURE__*/_jsx(\"p\",{children:\"The user you're looking for doesn't exist.\"}),/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"btn btn-primary\",children:\"Back to Home\"})]});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'30px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',alignItems:'center',gap:'15px',marginBottom:'20px'},children:/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"btn btn-secondary\",children:\"\\u2190 Back to Home\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"user-profile-header\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'15px',marginBottom:'20px'},children:[/*#__PURE__*/_jsx(ProfilePhoto,{currentPhoto:user.profile_photo,size:\"large\",username:user.username}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h1\",{children:[user.username,\"'s Profile\"]}),/*#__PURE__*/_jsxs(\"p\",{style:{color:'#65676b',marginTop:'10px'},children:[posts.length,\" post\",posts.length!==1?'s':'',\" \\u2022 Member since \",formatDate(user.created_at)]})]})]})})]}),posts.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"No posts yet\"}),/*#__PURE__*/_jsxs(\"p\",{children:[user.username,\" hasn't shared anything yet.\"]}),currentUser&&currentUser.id===user.id&&/*#__PURE__*/_jsx(Link,{to:\"/create-post\",className:\"btn btn-primary\",style:{marginTop:'20px'},children:\"Create Your First Post\"})]}):/*#__PURE__*/_jsx(\"div\",{children:posts.map(post=>/*#__PURE__*/_jsxs(\"div\",{className:\"post-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"post-header\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'10px'},children:[/*#__PURE__*/_jsx(ProfilePhoto,{currentPhoto:post.author_photo,size:\"small\",username:post.author}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"post-author\",children:post.author}),/*#__PURE__*/_jsx(\"span\",{className:\"post-visibility \".concat(post.visibility),children:post.visibility==='public'?'üåê Public':'üîí Private'})]})]}),/*#__PURE__*/_jsx(\"span\",{className:\"post-time\",children:formatDate(post.created_at)})]}),/*#__PURE__*/_jsx(\"div\",{className:\"post-content\",children:post.content.length>200?\"\".concat(post.content.substring(0,200),\"...\"):post.content}),post.image_filename&&/*#__PURE__*/_jsx(\"div\",{className:\"post-image\",children:/*#__PURE__*/_jsx(\"img\",{src:\"http://localhost:5000/uploads/\".concat(post.image_filename),alt:\"Post content\",className:\"post-image-content\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"post-actions\",children:[/*#__PURE__*/_jsx(Link,{to:\"/posts/\".concat(post.id),style:{color:'#1877f2',textDecoration:'none',fontWeight:'500'},children:\"View Post \\u2192\"}),/*#__PURE__*/_jsxs(\"span\",{style:{color:'#65676b',fontSize:'14px'},children:[post.comment_count,\" comment\",post.comment_count!==1?'s':'']})]})]},post.id))})]});};export default UserProfile;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useParams","Link","api","useAuth","ProfilePhoto","jsx","_jsx","jsxs","_jsxs","UserProfile","username","user","currentUser","setUser","posts","setPosts","loading","setLoading","error","setError","fetchUserPosts","response","get","concat","data","err","console","formatDate","dateString","date","Date","toLocaleDateString","year","month","day","hour","minute","className","children","to","style","marginBottom","display","alignItems","gap","currentPhoto","profile_photo","size","color","marginTop","length","created_at","id","map","post","author_photo","author","visibility","content","substring","image_filename","src","alt","textDecoration","fontWeight","fontSize","comment_count"],"sources":["/Users/kylehailey/cursor/vrai.art/client/src/components/UserProfile.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport api from '../services/api';\nimport { useAuth } from '../contexts/AuthContext';\nimport ProfilePhoto from './ProfilePhoto';\n\nconst UserProfile = () => {\n  const { username } = useParams();\n  const { user: currentUser } = useAuth();\n  const [user, setUser] = useState(null);\n  const [posts, setPosts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  const fetchUserPosts = useCallback(async () => {\n    try {\n      setLoading(true);\n      const response = await api.get(`/users/${username}/posts`);\n      setUser(response.data.user);\n      setPosts(response.data.posts);\n      setError('');\n    } catch (err) {\n      setError('Failed to load user profile');\n      console.error('Error fetching user posts:', err);\n    } finally {\n      setLoading(false);\n    }\n  }, [username]);\n\n  useEffect(() => {\n    fetchUserPosts();\n  }, [fetchUserPosts]);\n\n  const formatDate = (dateString) => {\n    const date = new Date(dateString);\n    return date.toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  if (loading) {\n    return (\n      <div className=\"loading\">\n        <h3>Loading...</h3>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"alert alert-error\">\n        {error}\n      </div>\n    );\n  }\n\n  if (!user) {\n    return (\n      <div className=\"empty-state\">\n        <h3>User not found</h3>\n        <p>The user you're looking for doesn't exist.</p>\n        <Link to=\"/\" className=\"btn btn-primary\">\n          Back to Home\n        </Link>\n      </div>\n    );\n  }\n\n  return (\n    <div>\n      <div style={{ marginBottom: '30px' }}>\n        <div style={{ display: 'flex', alignItems: 'center', gap: '15px', marginBottom: '20px' }}>\n          <Link to=\"/\" className=\"btn btn-secondary\">\n            ‚Üê Back to Home\n          </Link>\n        </div>\n        \n        <div className=\"user-profile-header\">\n          <div style={{ display: 'flex', alignItems: 'center', gap: '15px', marginBottom: '20px' }}>\n            <ProfilePhoto\n              currentPhoto={user.profile_photo}\n              size=\"large\"\n              username={user.username}\n            />\n            <div>\n              <h1>{user.username}'s Profile</h1>\n              <p style={{ color: '#65676b', marginTop: '10px' }}>\n                {posts.length} post{posts.length !== 1 ? 's' : ''} ‚Ä¢ Member since {formatDate(user.created_at)}\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {posts.length === 0 ? (\n        <div className=\"empty-state\">\n          <h3>No posts yet</h3>\n          <p>{user.username} hasn't shared anything yet.</p>\n          {currentUser && currentUser.id === user.id && (\n            <Link to=\"/create-post\" className=\"btn btn-primary\" style={{ marginTop: '20px' }}>\n              Create Your First Post\n            </Link>\n          )}\n        </div>\n      ) : (\n        <div>\n          {posts.map((post) => (\n            <div key={post.id} className=\"post-card\">\n              <div className=\"post-header\">\n                <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>\n                  <ProfilePhoto\n                    currentPhoto={post.author_photo}\n                    size=\"small\"\n                    username={post.author}\n                  />\n                  <div>\n                    <span className=\"post-author\">{post.author}</span>\n                    <span className={`post-visibility ${post.visibility}`}>\n                      {post.visibility === 'public' ? 'üåê Public' : 'üîí Private'}\n                    </span>\n                  </div>\n                </div>\n                <span className=\"post-time\">{formatDate(post.created_at)}</span>\n              </div>\n              \n              <div className=\"post-content\">\n                {post.content.length > 200 \n                  ? `${post.content.substring(0, 200)}...` \n                  : post.content\n                }\n              </div>\n              \n              {post.image_filename && (\n                <div className=\"post-image\">\n                  <img \n                    src={`http://localhost:5000/uploads/${post.image_filename}`}\n                    alt=\"Post content\"\n                    className=\"post-image-content\"\n                  />\n                </div>\n              )}\n              \n              <div className=\"post-actions\">\n                <Link to={`/posts/${post.id}`} style={{ color: '#1877f2', textDecoration: 'none', fontWeight: '500' }}>\n                  View Post ‚Üí\n                </Link>\n                <span style={{ color: '#65676b', fontSize: '14px' }}>\n                  {post.comment_count} comment{post.comment_count !== 1 ? 's' : ''}\n                </span>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default UserProfile;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}